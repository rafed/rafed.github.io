---
layout: blog
title: Google custom search implementation
description: Why take the trouble to make your own search bar when you can use Google's? I'll show you how to implement Google's custom search bar on your site in the best way.
coding: true
---

## How to implement Google custom search on your site

Look at the top-right side of this page, you'll see a **Google custom search bar**. If you want to implement a search bar like this on your site, you've come to the right place! 

### Simple implementation

> At first go to [cse.google.com/cse/](https://cse.google.com/cse/) and click on **Create a custom search engine**.

> Fill up "sites to search" (URL of your site/sites) and "name of the search engine" (name it whatever you like) and click on **Create**.

> When it is successfully created click on **Get code**. You'll get something like this.

{% highlight javascript linenos %}
<script>
  (function() {
    var cx = 'YOUR OWN CODE FOR THE SEARCH ENGINE';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
{% endhighlight %}

> Now if you copy and paste the generated code on your site (in the body section) you've done a basic implementation of the custom search engine! Reload your page and give it a test drive. You'll see something like this.

#### The search bar.

<img class="pic" alt="Search bar" src="/img/blog/gsearch1.png">

#### The search results.

<img class="pic" alt="Search results" src="/img/blog/gsearch2.png">

Now, there are two problems with this:
1. The search bar is already provided by Google. What if you want to use your own designed search bar?
2. If you use bootstrap on your site, then it conflicts with the CSS classes of the Google search bar and it isn't rendered properly.

### Best implementation

If you're happy with the way it shows now, fine with me. But now, I'm going to show you how to do it my way. In my way, you can use your own designed search bar or use bootstraps search bar.

> Keep the JS code generated by Google (the one shown in the previous section) but replace this-

{% highlight javascript %}
<gcse:search></gcse:search>
{% endhighlight %}

> with this.

{% highlight javascript %}
<gcse:searchresults-only></gcse:searchresults-only>
{% endhighlight %}

> Design your search bar. I've done it with bootstrap on my site with the following code inside my navbar. Make sure to do three things in your form:
1. Give the form **id="cse-search-box-form-id"** and **onsubmit="return executeQuery();"**
2. Give the input field **id="cse-search-input-box-id"**
3. Put the JS script in the code shown below

{% highlight html linenos %}
<form class="navbar-form navbar-right" id="cse-search-box-form-id" onsubmit="return executeQuery();" role="search">
  <div class="input-group"> 
    <input type="text" class="form-control" id="cse-search-input-box-id" size="25" autocomplete="off">
    
    // MAKE SURE TO PUT THIS JS SCRIPT
    <script async type="text/javascript"
      src="//cse.google.com/cse/brand?form=cse-search-box-form-id&inputbox=cse-search-input-box-id">
    </script>
    
    <span class="input-group-btn">
      <button type="submit" class="btn btn-default">
        <span class="glyphicon glyphicon-search"></span>
      </button>
    </span>
  </div>
</form>
{% endhighlight %}

> And finally define the executeQuery() function inside a script tag like this-

{% highlight html linenos %}
<script>
  function executeQuery() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }
</script>
{% endhighlight %}

Now give it a test drive and you should have your very own google custom search bar up and running. Enjoy! :smiley:

